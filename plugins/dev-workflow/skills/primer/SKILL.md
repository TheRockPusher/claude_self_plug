---
name: Primer
description: This skill should be used when the user asks to "map the codebase", "generate context docs", "create architecture docs", "document conventions", "prime context", "analyse project structure", "create a primer", or wants persistent codebase documentation that survives sessions.
---

# Primer

Generate persistent context documents that prime future sessions with
comprehensive project understanding.

## Output Location

Create or update documents in `.agents/context/`:

| Document | Purpose |
| --- | --- |
| `ARCHITECTURE.md` | Structure, patterns, components, tooling |
| `CONVENTIONS.md` | Code style, naming, testing |
| `CODE-MAP.md` | File purposes and organisation |

## Process

### 1. Discover

Run `git ls-files` for tracked files. Run `git log -10 --oneline` for recent activity.

Read if present: CLAUDE.md, AGENTS.md, `.agents/**/*.md`.

**Never glob these directories:**

- `.venv/`, `node_modules/`, `dist/`, `build/`, `.git/`

### 2. Analyse

Launch parallel Task agents:

| Agent | Focus |
| --- | --- |
| Architecture | Directory structure, entry points, components, dependencies |
| Conventions | Naming, imports, error handling, logging, types |
| Testing | Framework, patterns, fixtures, coverage |
| Tooling | Package config, build commands, linting, CI |

Extract **file:line references** and **real code examples** from the codebase.

### 3. Draft and Approve

Synthesize findings into drafts. **Use AskUserQuestion before writing** —
present summary of each document, get explicit approval.

### 4. Write

Run `mkdir -p .agents/context` then write approved documents.

Add header to each:

```markdown
> Auto-generated by primer skill. Last updated: {date}
> Preserve custom content in `<!-- CUSTOM -->` blocks
```

### 5. Update Mode

When documents already exist:

1. Diff current codebase against existing docs
2. Present changes to user (new files, changed patterns, removed items)
3. Merge updates while preserving `<!-- CUSTOM -->` blocks
4. Bump timestamp

## Document Templates

Refer to `references/output-templates.md` for the structure of each output document.

## Guidelines

- Accuracy over completeness — omit rather than guess
- Real examples over abstract descriptions
- Always include file:line references
- Never write without user approval
